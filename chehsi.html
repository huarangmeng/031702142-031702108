<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="jquery.js"></script>

    <!--导入样式文件和js文件 jquery要在ztree之前引入-->

    <link rel="stylesheet" href="css/zTreeStyle/zTreeStyle.css" type="text/css">
    <script src="js/jquery-1.4.4.min.js"></script>
    <script src="js/jquery.ztree.all.min.js"></script>

</head>

<body>

<textarea type="text" id="inp" style="width: auto ;height: auto"></textarea>

<button type="button" onclick="getString()">提交</button>

<!--创建放置树的容器-->
<ul id="ztree1" class="ztree">

</ul>

<button onclick="getCheckedNode()">获取已选的数据</button>
</body>
<script>
    function getString() {
        let str;
        str = document.getElementById("inp").value;
        var num = 100;
        var student =  1000;
        for(var i = 0; i < str.length;i++){
            if(str[i] == "导"&& str[i+1] == "师" &&str[i+2] == "："){
                var name;
                var k = 0;
                for(var j = i+3;str.length;j++){
                    if(str[j] == "\n") {//导师名字输入完成
                        k = j;
                        break;
                    }
                }
                if(k == 0) k = str.length-1;
                name = "导师：" + str.substring(i+3,k);
                zNodes1.push({"id":1,"pId":0,"name":name});
            }
        }
        zNodes1.push({"id":2,"pId":0,"name":"ddddd"});
        //初始化第一个树
        $.fn.zTree.init($("#ztree1"), setting1, zNodes1);
    }
</script>
<script>
    $(function() {

        //树节点数据
        zNodes1 = [
        ];

        //创建ztree的配置对象
        setting1 = {
            treeId: "ztree1",
            data: {
                simpleData: {
                    enable: true, //设置使用简单数据格式
                    idKey: "id", //id标识  可以修改为数据库对应字段
                    pIdKey: "pId", //父级id
                    rootPId: 0, //根节点id
                }
            },
            //设置点击事件
            callback: {
                onClick: function(event, treeId, treeNode, clickFlag) {
                    console.log(treeNode.name)
                }
            },
            check: {
                enable: true, //是否显示 checkbox/radio
                chkStyle: "radio", //设置显示类型 值可选：radio/checkbox
            }
        }

        //初始化第一个树
        $.fn.zTree.init($("#ztree1"), setting1, zNodes1);

    })

    function getCheckedNode() {
        //获取选中的数据

        //获取指定id的tree对象
        var treeObj = $.fn.zTree.getZTreeObj("ztree1");

        //获取选中的数据
        var checkedNods = treeObj.getCheckedNodes();

        console.log(checkedNods)
    }
</script>

</html>
